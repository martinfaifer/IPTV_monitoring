"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[821],{9821:(t,e,a)=>{a.r(e),a.d(e,{default:()=>o});const s={data:function(){return{createDialog:!1,warningDialog:!1,editDialog:!1,changeStreamStatus:!1,sheduleDialog:!1,newSheduleDialog:!1,formData:[],errors:[],search:"",items:[],stream:[],headers:[{text:"Náhled",value:"image"},{text:"Stream",value:"nazev"},{text:"Url",value:"stream_url"},{text:"Status",value:"status"},{text:"Kontrola PTS",value:"check_pts"},{text:"Dohleduje se",value:"monitored_at"},{text:"Akce",value:"actions"}],headersSheduler:[{text:"Denně",value:"is_daily"},{text:"Začátek",value:"start_time"},{text:"Konec",value:"end_time"},{text:"Akce",value:"actions"}]}},created:function(){this.index()},methods:{index:function(){var t=this;axios.get("settings/streams").then((function(e){t.items=e.data})).catch((function(e){403==e.response.status&&t.$router.push("/403")}))},storeStream:function(){var t=this;axios.post("settings/streams",{nazev:this.formData.nazev,stream_url:this.formData.stream_url,check_pts:this.formData.check_pts}).then((function(e){t.$store.state.alerts=e.data,t.closeDialog(),t.index()})).catch((function(e){t.errors=e.response.data.errors}))},closeDialog:function(){this.createDialog=!1,this.warningDialog=!1,this.editDialog=!1,this.changeStreamStatus=!1,this.sheduleDialog=!1,this.newSheduleDialog=!1,this.formData=[],this.errors=[]},openSheduleDialog:function(t){this.loadEvents(t),this.sheduleDialog=!0},loadEvents:function(t){var e=this;axios.get("settings/streams/shedule/"+t).then((function(a){e.formData=a.data,e.formData.streamId=t}))},openNewSheduleDialog:function(){this.newSheduleDialog=!0},storeNewShedule:function(){var t=this,e=this.formData.streamId;axios.post("settings/streams/shedule/"+e,{start_time:this.formData.newStartTime,start_date:this.formData.newStartDate,end_time:this.formData.newEndTime,end_date:this.formData.newEndDate,is_daily:this.formData.isDaily}).then((function(a){t.$store.state.alerts=a.data,t.newSheduleDialog=!1,t.formData.newStartTime="",t.formData.newStartDate="",t.formData.newEndTime="",t.formData.newEndDate="",t.formData.isDaily="",t.loadEvents(e)})).catch((function(e){t.errors=e.response.data.errors}))},removeTime:function(t){var e=this;axios.delete("settings/streams/shedule/"+t).then((function(t){e.$store.state.alerts=t.data,e.loadEvents(e.formData.streamId)}))},openNewStreamDialog:function(){this.createDialog=!0},deleteStream:function(){var t=this;axios.delete("settings/streams/"+this.formData).then((function(e){t.$store.state.alerts=e.data,t.closeDialog(),t.index()}))},deleteItem:function(t){this.formData=t,this.warningDialog=!0},openEditDialog:function(t){this.stream=t,this.editDialog=!0},editStream:function(){var t=this;axios.patch("settings/streams/"+this.stream.id,{nazev:this.stream.nazev,changeStreamStatus:this.changeStreamStatus,check_pts:this.stream.check_pts}).then((function(e){t.$store.state.alerts=e.data,t.closeDialog(),t.index()})).catch((function(e){t.errors=e.response.data.errors}))}}};const o=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[a("v-card",{staticClass:"overflow-hidden rounded-xl blur shadow-blur",attrs:{flat:""}},[a("v-card-title",[a("v-text-field",{attrs:{autofocus:"",outlined:"",dense:"",color:"#1E293B","prepend-inner-icon":"mdi-magnify",label:"Hledání ...","single-line":"","hide-details":"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["n","ctrl"],expression:"['n', 'ctrl']"}],attrs:{plain:"",outlined:"",color:"#0277BD"},on:{click:function(e){return t.openNewStreamDialog()}}},[t._v("\n                            Nový stream\n                        ")])],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.items,search:t.search},scopedSlots:t._u([{key:"item.image",fn:function(t){var e=t.item;return[a("v-card",{staticClass:"rounded-md",attrs:{flat:"",color:"transparent"}},[a("v-img",{attrs:{height:"25",width:"45",cover:"","lazy-src":e.image,src:e.image,"aspect-ratio":16/9}})],1)]}},{key:"item.check_pts",fn:function(e){return[1==e.item.check_pts?a("v-icon",{attrs:{color:"green"}},[t._v("\n                                mdi-check\n                            ")]):a("v-icon",{attrs:{color:"red"}},[t._v(" mdi-close ")])]}},{key:"item.status",fn:function(e){var s=e.item;return["waiting"==s.status?a("v-chip",{staticClass:"mx-auto",attrs:{"text-color":"blue",color:"blue",small:"",outlined:""}},[t._v("\n                                Čeká na spuštění\n                            ")]):t._e(),t._v(" "),"monitoring"==s.status?a("v-chip",{staticClass:"mx-auto",attrs:{"text-color":"green",color:"green",small:"",outlined:""}},[t._v("\n                                Dohleduje se\n                            ")]):t._e(),t._v(" "),"starting"==s.status?a("v-chip",{staticClass:"mx-auto",attrs:{"text-color":"teal",color:"teal",small:"",outlined:""}},[t._v("\n                                Spouští se dohledování\n                            ")]):t._e(),t._v(" "),"stopped"==s.status?a("v-chip",{staticClass:"mx-auto",attrs:{"text-color":"blue",color:"blue",small:"",outlined:""}},[t._v("\n                                Zastaveno dohledování\n                            ")]):t._e(),t._v(" "),"can_not_start"==s.status?a("v-chip",{staticClass:"mx-auto",attrs:{"text-color":"red",color:"red",small:"",outlined:""}},[t._v("\n                                Výpadek\n                            ")]):t._e(),t._v(" "),"issue"==s.status?a("v-chip",{staticClass:"mx-auto",attrs:{"text-color":"orange",color:"orange",small:"",outlined:""}},[t._v("\n                                Problém ve streamu\n                            ")]):t._e()]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{attrs:{small:"",color:"info"},on:{click:function(e){return t.openEditDialog(s)}}},[t._v("mdi-pencil")]),t._v(" "),a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(s.id)}}},[t._v("mdi-delete")]),t._v(" "),a("v-icon",{staticClass:"ml-6",attrs:{color:"yellow",small:""},on:{click:function(e){return t.openSheduleDialog(s.id)}}},[t._v("\n                                mdi-calendar\n                            ")])]}}])})],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"400px","overlay-color":"rgb(17, 27, 45)"},model:{value:t.warningDialog,callback:function(e){t.warningDialog=e},expression:"warningDialog"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.deleteStream()}}},[a("v-card",[a("v-card-text",[a("v-container",{staticClass:"pt-3"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[a("p",{staticClass:"mt-6 text-center headline"},[t._v("\n                                    Přejete si odebrat kanál?\n                                ")])])],1)],1)],1),t._v(" "),a("v-card-actions",{attrs:{color:"#101B1D"}},[a("v-btn",{attrs:{color:"blue darken-1",plain:"",outlined:""},on:{click:function(e){return t.closeDialog()}}},[t._v("\n                        Zavřít\n                    ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",type:"submit",plain:"",outlined:""}},[t._v("\n                        Odebrat\n                    ")])],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px","overlay-color":"rgb(17, 27, 45)"},model:{value:t.createDialog,callback:function(e){t.createDialog=e},expression:"createDialog"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.storeStream()}}},[a("v-card",[a("p",{staticClass:"pt-3 text-center subtitle-1"},[t._v("\n                    Založení nového streamu\n                ")]),t._v(" "),a("v-card-text",[a("v-container",{staticClass:"pt-3"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[a("v-text-field",{attrs:{dense:"",outlined:"",autofocus:"","error-messages":t.errors.nazev,label:"Název sreamu",type:"text",color:"#0277BD"},model:{value:t.formData.nazev,callback:function(e){t.$set(t.formData,"nazev",e)},expression:"formData.nazev"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[a("v-text-field",{attrs:{dense:"",outlined:"","error-messages":t.errors.stream_url,label:"dohledová adresa",type:"text",color:"#0277BD"},model:{value:t.formData.stream_url,callback:function(e){t.$set(t.formData,"stream_url",e)},expression:"formData.stream_url"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:"Kontrolovat PTS"},model:{value:t.formData.check_pts,callback:function(e){t.$set(t.formData,"check_pts",e)},expression:"formData.check_pts"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",{attrs:{color:"#101B1D"}},[a("v-btn",{attrs:{color:"blue darken-1",plain:"",outlined:""},on:{click:function(e){return t.closeDialog()}}},[t._v("\n                        Zavřít\n                    ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",type:"submit",plain:"",outlined:""}},[t._v("\n                        Uložit\n                    ")])],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px","overlay-color":"rgb(17, 27, 45)"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.editStream()}}},[a("v-card",[a("p",{staticClass:"pt-3 text-center subtitle-1"},[t._v("Úprava streamu")]),t._v(" "),a("v-card-text",[a("v-container",{staticClass:"pt-3"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[a("v-text-field",{attrs:{dense:"",outlined:"",autofocus:"","error-messages":t.errors.nazev,label:"Název sreamu",type:"text",color:"#0277BD"},model:{value:t.stream.nazev,callback:function(e){t.$set(t.stream,"nazev",e)},expression:"stream.nazev"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[a("v-text-field",{attrs:{dense:"",outlined:"",readonly:"",disabled:"","error-messages":t.errors.stream_url,label:"dohledová adresa",type:"text",color:"#0277BD"},model:{value:t.stream.stream_url,callback:function(e){t.$set(t.stream,"stream_url",e)},expression:"stream.stream_url"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},["stopped"==t.stream.status?a("span",[a("v-switch",{attrs:{label:"Přidání streamu do fronty ke spuštění"},model:{value:t.changeStreamStatus,callback:function(e){t.changeStreamStatus=e},expression:"changeStreamStatus"}})],1):a("span",[a("v-switch",{attrs:{label:"Vypnutí dohledování streamu"},model:{value:t.changeStreamStatus,callback:function(e){t.changeStreamStatus=e},expression:"changeStreamStatus"}})],1)]),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:"Kontrolovat PTS"},model:{value:t.stream.check_pts,callback:function(e){t.$set(t.stream,"check_pts",e)},expression:"stream.check_pts"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",{attrs:{color:"#101B1D"}},[a("v-btn",{attrs:{color:"blue darken-1",plain:"",outlined:""},on:{click:function(e){return t.closeDialog()}}},[t._v("\n                        Zavřít\n                    ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",type:"submit",plain:"",outlined:""}},[t._v("\n                        Uložit\n                    ")])],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px","overlay-color":"rgb(17, 27, 45)"},model:{value:t.sheduleDialog,callback:function(e){t.sheduleDialog=e},expression:"sheduleDialog"}},[a("v-card",[a("p",{staticClass:"pt-3 text-center subtitle-1"},[t._v("\n                Automatické nedohledování streamu\n            ")]),t._v(" "),a("v-card-text",[a("v-container",{staticClass:"pt-3"},[a("div",{staticClass:"d-flex flex-row-reverse"},[a("v-icon",{attrs:{color:"green"},on:{click:function(e){return t.openNewSheduleDialog()}}},[t._v("mdi-plus")])],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[a("v-data-table",{attrs:{headers:t.headersSheduler,items:t.formData},scopedSlots:t._u([{key:"item.is_daily",fn:function(e){return[1==e.item.is_daily?a("v-icon",{attrs:{small:"",color:"green"}},[t._v("\n                                        mdi-check\n                                    ")]):a("v-icon",{attrs:{small:"",color:"red"}},[t._v("\n                                        mdi-close\n                                    ")])]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.removeTime(s.id)}}},[t._v("\n                                        mdi-delete\n                                    ")])]}}])})],1)],1)],1)],1),t._v(" "),a("v-card-actions",{attrs:{color:"#101B1D"}},[a("v-btn",{attrs:{color:"blue darken-1",plain:"",outlined:""},on:{click:function(e){return t.closeDialog()}}},[t._v("\n                    Zavřít\n                ")]),t._v(" "),a("v-spacer")],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"1600px","overlay-color":"rgb(17, 27, 45)"},model:{value:t.newSheduleDialog,callback:function(e){t.newSheduleDialog=e},expression:"newSheduleDialog"}},[a("v-card",[a("p",{staticClass:"pt-3 text-center subtitle-1"},[t._v("Nové časové okno")]),t._v(" "),a("v-card-text",[a("v-container",{staticClass:"pt-3"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:"Opakovat denně?"},model:{value:t.formData.isDaily,callback:function(e){t.$set(t.formData,"isDaily",e)},expression:"formData.isDaily"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"body-2 text-center font-weight-medium"},[t._v("\n                                Začátek nedohledování streamu\n                            ")]),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[a("v-time-picker",{attrs:{color:"#0b131f",format:"24hr",landscape:""},model:{value:t.formData.newStartTime,callback:function(e){t.$set(t.formData,"newStartTime",e)},expression:"formData.newStartTime"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[t.formData.isDaily&&0!=t.formData.isDaily?t._e():a("v-date-picker",{attrs:{landscape:""},model:{value:t.formData.newStartDate,callback:function(e){t.$set(t.formData,"newStartDate",e)},expression:"formData.newStartDate"}})],1)],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"body-2 text-center font-weight-medium"},[t._v("\n                                Konec nedohledování streamu\n                            ")]),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[a("v-time-picker",{attrs:{color:"#0b131f",format:"24hr",landscape:""},model:{value:t.formData.newEndTime,callback:function(e){t.$set(t.formData,"newEndTime",e)},expression:"formData.newEndTime"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[t.formData.isDaily&&0!=t.formData.isDaily?t._e():a("v-date-picker",{attrs:{landscape:""},model:{value:t.formData.newEndDate,callback:function(e){t.$set(t.formData,"newEndDate",e)},expression:"formData.newEndDate"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",{attrs:{color:"#101B1D"}},[a("v-btn",{attrs:{color:"blue darken-1",plain:"",outlined:""},on:{click:function(e){return t.closeDialog()}}},[t._v("\n                    Zavřít\n                ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",plain:"",outlined:""},on:{click:function(e){return t.storeNewShedule()}}},[t._v("\n                    Uložit\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports},1900:(t,e,a)=>{function s(t,e,a,s,o,r,n,l){var i,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),n?(i=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=i):o&&(i=l?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),i)if(c.functional){c._injectStyles=i;var d=c.render;c.render=function(t,e){return i.call(e),d(t,e)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,i):[i]}return{exports:t,options:c}}a.d(e,{Z:()=>s})}}]);